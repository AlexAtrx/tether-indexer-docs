Reviewed PR #97 (Security Fix: Address Uniqueness Enforcement) and the review comments. No local code changes made.

migrations/mongodb/2025-11-26_normalize-wallet-addresses.js:42 (vigan-abd) + AlexAtrx reply — Original ask was to reuse sanitizeInput. Current migration now inlines the same normalization rules (lowercase unless caseSensitive.address matches, with regex compilation like worker init). Using BlockchainService directly isn’t viable because it expects the full worker context (incl. conf), which the migration doesn’t have, so the inline approach is appropriate; just keep it in sync with @tetherto/wdk-data-shard-wrk/workers/lib/blockchain.svc.js if that ever changes.
migrations/hyperdb/2025-11-26_normalize-wallet-addresses.js:24 & :122 (SargeKhan) + AlexAtrx replies — Concerns about passing dbCtx to BlockchainService/dbCtx.conf are now obsolete; the migration no longer constructs BlockchainService and loads config/common.json directly. Nothing further needed.
migrations/mongodb/2025-11-26_normalize-wallet-addresses.js:25 & :127 (SargeKhan) + AlexAtrx replies — Same as above for the Mongo migration: BlockchainService was removed and config is loaded via require, so the earlier concern is resolved.
migrations/mongodb/2025-11-26_normalize-wallet-addresses.js:46 (SargeKhan) — Suggestion to fail if config is missing. Current logic intentionally mirrors production sanitizeInput (see node_modules/@tetherto/wdk-data-shard-wrk/workers/lib/blockchain.svc.js), which lowercases when no caseSensitive.address rule is present. Throwing here would diverge from runtime normalization; if stricter behavior is desired, the service and migration would both need to change.
migrations/mongodb/2025-11-26_normalize-wallet-addresses.js:95 (SargeKhan) — The _id fallback guards against any legacy rows missing id; the active codebase creates a sparse unique index on id (wdk_data_shard_wallets repo code), so this path should be rare. Optional follow-up: log when falling back to _id to detect unexpected data.
migrations/hyperdb/2025-11-26_normalize-wallet-addresses.js:134 (SargeKhan) — Comment is valid: caseSensitive.address is never set to false in the shipped configs (either undefined, true, or regex), so the summary will label most chains “case-sensitive” even though the normalization defaults to lowercase when the flag is absent. Consider adjusting the display to treat undefined as lowercase, or add explicit caseSensitive.address: false for case-insensitive chains in config.