# Rumble FE&BE Team collab

## Action Items

- Alex to double‑check the recent PR logic and confirm the null‑payload guard works
- Alex to create a ticket for the notification‑flow bug if needed
- Alex to share the React Native Grafana logging SDK/plugin link with Francesco
- Deploy the latest changes to dev and staging today (Francesco’s go‑ahead)
- Prepare release documentation for Andre’s production rollout
- Open PR with address‑validation guard; add test cases (already in progress)
- Team to evaluate self‑hosted /logs endpoint (auth + rate‑limit) vs Datadog/New Relic

## Notification Issue

- Two QR tip flows: “live rant” includes payload, triggers chat webhook; “channel/user” lacks payload
- Backend receives notification for both, but chat event only fires for payload‑full QR
- Missing payload causes webhook validation to pass but skips chat notification
- Recent fix adds guard to discard null payloads early and log them for later alignment
- No Firebase/mobile push involvement – issue is in‑app chat notification path

## Transaction Grouping & Validation

- Bundle blocks can contain multiple donation transactions
- Current logic processes only the first transaction, dropping the rest
- Result: incomplete or missing live‑chat notifications for multi‑donation blocks
- Proposed fix: iterate over all bundled transactions and emit separate notifications
- Additional validation: ensure from/to addresses in transaction hash match the wallet that triggered the request
- Guard prevents spoofed or unrelated transaction hashes from triggering webhooks

## Observability & Logging

- Current stack: Sentry for error collection, Grafana for metrics, limited log ingestion from mobile
- Alternatives discussed: Datadog, New Relic (full‑stack), Grafana Loki + Tempo + Prometheus (open‑source)
- Preference for self‑hosted solution to avoid third‑party data‑privacy concerns
- Suggested lightweight /logs endpoint: accept JSON logs, forward to Loki, enforce auth & rate limiting
- Need to handle both authenticated and unauthenticated mobile logs, batch/retry, sampling
- Decision pending: quick rollout with Datadog vs deeper integration with Grafana Loki

## Deployment & Release

- No production release performed while Alex was on holiday
- Staging/dev deployment scheduled today; production release pending documentation for Andre
- Multiple tickets in the backlog (notification fix, grouping fix, validation guard) being tracked in Slack

## Open Questions / Decisions

- Should address validation be strict or lenient initially? (Consensus leaning toward strict)
- Which observability stack to adopt first: Datadog for speed or Grafana Loki for self‑hosting?
- How to expose mobile logs without overloading backend (rate limiting, auth strategy)?
- Confirmation on whether the second QR flow ever worked historically (likely never implemented)
