# Config Management and Deployment Review

## Action Items

- Sync with Usman to learn the existing Tether config/secret management pattern.
- Review and merge the PR for the “four‑hour” issue once Osman’s approval is confirmed.
- Finish analysis of the live‑chat notification problem; open PRs for the fix and tag the team for review.
- Complete HyperDB testing for the mobile data‑collection endpoint and notify the reviewers.
- Monitor webhook and notification logs in staging after deployment; report any duplication or drop events.
- Coordinate with Gohar on the staging test plan and ensure the full‑day run before production release.

## Configuration Management

- Current process: JSON files in repo + secret files on each environment; manual edits required.
- Pain point: multiple chains & environments → small mismatches break deployments.
- Proposed: centralized config repo or management layer; version non‑secrets, inject secrets via secret manager.
- Suggestion: keep hard‑coded defaults in code, overridden by repo‑committed config files; defaults should match production values.
- Need to evaluate open‑source, self‑hosted solutions that don’t require external services.
- Action: reach out to other Tether teams (Beacon, Vehicle) for their config/secret patterns; avoid reinventing a custom solution.

## Spark Verification Flow

- Spark addresses do **not** embed the public key; verification requires an explicit identity/public key.
- Goal: keep wallet verify interface uniform across chains.
- Plan: extend verify method to accept optional public key; if provided, validate against it, otherwise skip for chains that don’t need it.
- Rumble should pass the public key for Spark only; avoid special‑casing in other wallets.

## Webhook & Notification Issue

- Problem: duplicate or missing webhook deliveries due to in‑memory LRU dedupe cache losing state on restarts/load.
- Fix direction: persist dedupe state (e.g., Redis or DB) to make processing durable and idempotent.
- Mohamed highlighted this duplication/drop risk; the team is bundling the fix with other backend changes.

## Deployment & Testing Pipeline

- Current flow: dev → staging → production.
- Staging should run for a full day with Gohar’s regression suite and organic blockchain activity before production cut‑over.
- Gohar will test transaction creation, sending/receiving, and any change‑log‑specific scenarios.
- Team prefers to push to dev, then immediately to staging, run tests, and only promote to prod after stable logs.
- Consensus: aim for production release tomorrow, not later than the day after.

## Pull Requests & Recent Updates

- PR for “four‑hour” issue (approved by Osman) ready to merge.
- PRs opened for mobile app data collection (tested with MongoDB, pending HyperDB tests).
- PR for dev‑environment deployment fix (Vegan merged).
- Ongoing PR for Spark verification changes; will update the team once ready.

## Miscellaneous

- Reminder: default config values should mirror production to minimize overrides during deployment.
- Discussion about using environment variables for new configs, with file overrides for deeper nested structures.
- Team agreed to reconvene after Usman proposes a config‑management solution.
